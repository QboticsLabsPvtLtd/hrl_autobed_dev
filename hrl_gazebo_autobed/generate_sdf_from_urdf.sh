#!/bin/bash

#Generate URDF from Xacro files
#rosrun xacro xacro.py ./urdf/darci.urdf.xacro > ./urdf/darci.urdf

#Convert URDF to SDF
gzsdf print ./urdf/autobed.URDF > sdf/model.sdf
gzsdf print urdf/human.URDF > sdf/human.sdf
#Add ability to add plugins to the sdf
sed -i "s/<\/model>/  <plugin name='ros_model_plugin' filename='libros_model_plugin.so'\/>\\
  <\/model>/1" sdf/model.sdf

#Fix Links as generated by the gzsdf command
sed -i "s/hrl_gazebo_autobed\/urdf/autobed/g" sdf/model.sdf
sed -i "s/hrl_gazebo_autobed\/urdf/human/g" sdf/human.sdf
#Copy new file into desired locations
rm ~/.gazebo/models/autobed/model.sdf
cp sdf/model.sdf ~/.gazebo/models/autobed/

rm ~/.gazebo/models/human/human.sdf
cp sdf/human.sdf ~/.gazebo/models/human/
#mv ~/.gazebo/models/human/human.config ~/.gazebo/models/human/model.config
